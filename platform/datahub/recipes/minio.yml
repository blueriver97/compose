pipeline_name: minio-source
source:
  type: s3
  config:
    env: DEV
    platform_instance: minio-datalake
    aws_config:
      aws_region: ap-northeast-2 # 임의 값, MinIO는 실제 리전을 사용하지 않아도 무방
      aws_access_key_id: $(MINIO_ACCESS_KEY)
      aws_secret_access_key: ${MINIO_SECRET_KEY}
      aws_endpoint_url: http://minio.example.com:9000 # MinIO 엔드포인트 명확히 지정
      aws_session_token: null
    path_specs:
      - include: s3://datalake/log/{table}/year={year}/month={month}/day={day}/*.parquet
      - include: s3://datalake/iceberg/**/*
        allow_double_stars: true
        autodetect_partitions: true
    verify_ssl: false # 자체 서명 인증서 사용 시 false, 공식 인증서면 true
    profiling:
      enabled: false # Spark 환경이 준비된 경우 true로 설정 가능
    stateful_ingestion:
      enabled: true
      remove_stale_metadata: true

datahub_api:
  server: http://datahub-gms:8080

sink:
  type: datahub-rest
  config:
    server: http://datahub-gms:8080
