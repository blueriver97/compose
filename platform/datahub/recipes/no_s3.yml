pipeline_name: s3-source
source:
  type: s3
  config:
    platform_instance: s3-datalake
    aws_config:
      aws_region: ap-northeast-2
      aws_access_key_id: ${AWS_ACCESS_KEY_ID}
      aws_secret_access_key: ${AWS_SECRET_ACCESS_KEY}
      aws_session_token: null
    path_specs:
      - include: s3://datalake/log/{table}/year={year}/month={month}/day={day}/*.parquet
      - include: s3://datalake/iceberg/**/*
        allow_double_stars: true
        autodetect_partitions: true
    profiling:
      enabled: false # Spark 환경이 준비된 경우 true로 설정 가능
    stateful_ingestion:
      enabled: true
      remove_stale_metadata: true

datahub_api:
  server: http://datahub-gms:8080

sink:
  type: datahub-rest
  config:
    server: http://datahub-gms:8080
