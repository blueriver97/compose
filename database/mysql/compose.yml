services:
  mysql:
    image: mysql:$MYSQL_VERSION
    container_name: mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: __ROOT_PASSWORD__
      MYSQL_DATABASE: __DATABASE__
      MYSQL_USER: __USER__
      MYSQL_PASSWORD: __PASSWORD__
    networks:
      - default
    ports:
      - 3306:3306
    extra_hosts:
      - host.docker.internal:host-gateway
    volumes:
      - ./my$MYSQL_VERSION.cnf:/etc/my.cnf
      - mysql-config:/etc/mysql
      - mysql-data:/var/lib/mysql

networks:
  default:
    driver: bridge
    name: service-network

volumes:
  mysql-config:
  mysql-data:
#    driver: local
#    driver_opts:
#      type: none
#      o: bind
#      device: /data/volumes/mysql/config
